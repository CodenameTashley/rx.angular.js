function isFunction(a){return"[object Function]"===toString.call(a)}var Rx=window.Rx,observable=Rx.Observable,observableProto=observable.prototype,observableCreate=observable.create,disposableCreate=Rx.Disposable.create,SingleAssignmentDisposable=Rx.SingleAssignmentDisposable,CompositeDisposable=Rx.CompositeDisposable,Scheduler=Rx.Scheduler,noop=Rx.helpers.noop,toString=Object.prototype.toString,slice=Array.prototype.slice;!function(a,b){var c="object"==typeof exports&&exports&&("object"==typeof a&&a&&a==a.global&&(window=a),exports);"function"==typeof define&&define.amd?define(["rx","angular","exports"],function(c,d,e){return a.Rx=b(a,e,c,jQuery),a.Rx}):"object"==typeof module&&module&&module.exports==c?module.exports=b(a,module.exports,require("rx"),require("angular")):a.Rx=b(a,{},a.Rx,angular)}(this,function(a,b,c,d){var e=d.module("rx",[]);e.factory("rx",function(a){if(!a.Rx)throw new Error("Rx is not defined!");return a.Rx}),e.factory("observeOnScope",function(a){return function(b,c,d){return a.Observable.create(function(a){function e(b,c){a.onNext({oldValue:c,newValue:b})}return b.$watch(c,e,d)})}}),observableProto.safeApply=function(a,b){return b=isFunction(b)?b:noop,this.doAction(function(c){a.$$phase||a.$root.$$phase?b(c):a.$apply(function(){b(c)})})},e.config(["$provide",function(a){a.decorator("$rootScope",["$delegate",function(a){return Object.defineProperties(a.constructor.prototype,{$toObservable:{value:function(a,b){var d=this;return observableCreate(function(e){function f(a,b){e.onNext({oldValue:b,newValue:a})}var g=c.Disposable.create(d.$watch(a,f,b));return d.$on("$destroy",function(){g.isDisposed||g.dispose()}),g})},enumerable:!1},$eventToObservable:{value:function(a){var b=this;return observableCreate(function(c){function d(){c.onNext({event:arguments[0],additionalArguments:slice.call(arguments,1)})}var e=disposableCreate(b.$on(a,d));return b.$on("$destroy",function(){e.isDisposed||e.dispose()}),e})},enumerable:!1},$createObservableFunction:{value:function(a,b){var c=this;return observableCreate(function(d){return c[a]=function(){d.onNext(b?b.apply(this,arguments):1===arguments.length?arguments[0]:arguments)},function(){delete c[a]}})},enumerable:!1},$digestObservables:{value:function(a){var b=this;return d.map(a,function(a,c){return a.digest(b,c)})},enumerable:!1}}),a}])}]),e.run(["$parse",function(a){observableProto.digest=function(b,c){var d=this;return new AnonymousObservable(function(e){var f=a(c).assign,g=new SingleAssignmentDisposable;return g.setDisposable(d.subscribe(function(a){b.$$phase?f(b,a):b.$apply(f(b,a))},e.onError.bind(e),e.onCompleted.bind(e))),b.on("$destroy",function(){!g.isDisposed&&g.dispose()}),g})}}]);{var f=Date.now||+new Date;c.ScopeScheduler=function(){function a(a,b){var c=this,e=new SingleAssignmentDisposable;return d(e,c,b,a),e}function b(a,b,e){var f=this,g=c.Scheduler.normalize(b);if(0===g)return f.scheduleWithState(a,e);var h=new SingleAssignmentDisposable,i=setTimeout(function(){d(h,f,e,a)},g);return new CompositeDisposable(h,disposableCreate(function(){clearTimeout(i)}))}function d(a,b,c,d){function e(){!a.isDisposed&&a.setDisposable(c(b,d))}b._scope.$$phase||b._scope.$root.$$phase?e():b._scope.$apply(function(){e()})}function e(a,b,c){return this.scheduleWithRelativeAndState(a,b-this.now(),c)}return function(c){var d=new Scheduler(f,a,b,e);return d._scope=c,d}}()}return c});